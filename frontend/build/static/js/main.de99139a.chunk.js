(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{46:function(e,t,a){},47:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),s=a(35),o=a.n(s),l=(a(46),a(47),a(4)),i=a.n(l),d=a(6),u=a(15),b=a(2),j=a(3),p=a(7),O=a.n(p),m=a(14),h={isAuth:localStorage.getItem("isAuth")||!1,id:localStorage.getItem("id")||null,name:"",email:"",username:"",posts:[],error:!1,errorMessage:"",loading:!1,profile:{},fullPost:{},comments:[],totalPosts:10},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":case"DELETE_POST":case"SET_POST":return Object(b.a)(Object(b.a)({},e),{},{posts:Object(m.a)(t.payload)});case"LENGTH":return Object(b.a)(Object(b.a)({},e),{},{totalPosts:parseInt(t.payload)});case"SET_USER":case"LOGIN":case"SIGNUP":return localStorage.setItem("isAuth",!0),Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{isAuth:!0});case"LOADING":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"STOP_LOADING":return Object(b.a)(Object(b.a)({},e),{},{loading:!1});case"LOGOUT":case"AUTH_ERROR":return localStorage.clear(),Object(b.a)({},h);case"ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:!0,errorMessage:t.payload});case"REMOVE_ERROR":return Object(b.a)(Object(b.a)({},e),{},{error:!1,errorMessage:null});case"SET_PROFILE":return Object(b.a)(Object(b.a)({},e),{},{profile:Object(b.a)(Object(b.a)({},e.profile),t.payload)});case"FULL_POST":return console.log("Dispatching full post",t.payload),Object(b.a)(Object(b.a)({},e),{},{fullPost:Object(b.a)({},t.payload)});case"COMMENTS":return console.log("Dispatching full post",t.payload),Object(b.a)(Object(b.a)({},e),{},{comments:Object(m.a)(t.payload)});default:return e}},f=Object(c.createContext)(),y=function(e){var t=Object(c.useReducer)(x,h),a=Object(j.a)(t,2),r=a[0],s=a[1];return Object(n.jsx)(f.Provider,{value:[r,s],children:e.children})},v=a(8),g=Object(v.i)((function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=(t[0],t[1]),r=Object(v.g)(),s=Object(c.useState)({email:"",password:""}),o=Object(j.a)(s,2),l=o[0],p=o[1],m=function(e){p(Object(b.a)(Object(b.a)({},l),{},Object(u.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,c,s,o,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=JSON.stringify(l),c={headers:{"Content-Type":"application/json"}},a({type:"LOADING"}),e.next=6,O.a.post("/api/v1/auth/signin",n,c);case 6:if(s=e.sent,a({type:"STOP_LOADING"}),console.log(s),!1!==s.data.error){e.next=19;break}return console.log(s.data),o=s.data.payload,d=o._id,u=o.username,b=o.name,a({type:"LOGIN",payload:{id:d,username:u,name:b}}),localStorage.setItem("username",u),localStorage.setItem("id",d),console.log("going to dashboard"),e.abrupt("return",r.push("/dashboard/1"));case 19:a({type:"ERROR",payload:s.data.errorMessage}),setTimeout((function(){return a({type:"REMOVE_ERROR"})}),2e3);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{className:"my-2",onSubmit:function(e){return h(e)},children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(n.jsx)("input",{type:"email",name:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",value:l.email,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(n.jsx)("input",{name:"password",type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",value:l.password,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})})),N=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=(t[0],t[1]),r=Object(v.g)(),s=Object(c.useState)({name:"",username:"",email:"",password:""}),o=Object(j.a)(s,2),l=o[0],p=o[1],m=function(e){p(Object(b.a)(Object(b.a)({},l),{},Object(u.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,c,s,o,d,u,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=JSON.stringify(l),c={headers:{"Content-Type":"application/json"}},a({type:"LOADING"}),e.next=7,O.a.post("/api/v1/auth/signup",n,c);case 7:s=e.sent,a({type:"STOP_LOADING"}),s.data.error?a({type:"ERROR",payload:s.data.errorMessage}):(o=s.data.payload,d=o._id,u=o.username,b=o.name,a({type:"SIGNUP",payload:{id:d,username:u,name:b}}),r.push("/dashboard/1")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a({type:"ERROR",payload:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:function(e){return h(e)},children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("input",{type:"text",name:"name",className:"form-control",placeholder:"Enter name",value:l.name,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{children:"username"}),Object(n.jsx)("input",{type:"test",name:"username",className:"form-control",placeholder:"Enter username",value:l.username,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{children:"Email address"}),Object(n.jsx)("input",{type:"email",name:"email",className:"form-control",placeholder:"Enter email",value:l.email,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("input",{name:"password",type:"password",className:"form-control",placeholder:"Password",value:l.password,onChange:function(e){return m(e)},required:!0})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})},E=a(5),R=a(17),w=a.n(R),k=function(e){var t=e._id,a=e.title,c=e.body,r=e.likes,s=e.time;return Object(n.jsx)("div",{className:"card my-2",id:t,children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h4",{className:"card-title",children:a}),Object(n.jsx)("h5",{className:"card-text",children:c}),Object(n.jsx)("p",{children:w()(s).format("MMMM Do YYYY, h:mm:ss a")}),Object(n.jsxs)("span",{className:"my-2",children:[r.length," likes"]})]})})},S=r.a.memo(k),T=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=t[0],r=t[1],s=parseInt(Object(v.h)().page)||1;return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"LOADING"}),e.next=3,O.a.get("/api/v1/post?page=".concat(s));case 3:t=e.sent,a=t.data.posts,console.log(a),r({type:"STOP_LOADING"}),r({type:"SET_POST",payload:Object(m.a)(a)}),r({type:"LENGTH",payload:t.data.totalPosts});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r,s]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"bg-light p-5 rounded-lg m-3",children:[a.posts.map((function(e){return Object(n.jsx)(S,{id:e._id,title:e.title,body:e.body,likes:Object(m.a)(e.likes),time:e.datetime},e._id)})),Object(n.jsx)("nav",{"aria-label":"Page navigation example",children:Object(n.jsxs)("ul",{className:"pagination",children:[s>1&&Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)(E.b,{className:"page-link",to:"/".concat(s-1),children:"Previous"})}),parseInt(a.totalPosts)>3*parseInt(s)&&Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)(E.b,{className:"page-link",to:"/".concat(s+1),children:"Next"})})]})})]})})},P=a(21),_=function(e){var t=e.component,a=Object(P.a)(e,["component"]),r=Object(c.useContext)(f),s=Object(j.a)(r,1)[0];return Object(n.jsx)(v.b,Object(b.a)(Object(b.a)({},a),{},{render:function(){return s.isAuth?Object(n.jsx)(t,{}):Object(n.jsx)(v.a,{to:"/login"})}}))},I=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=(t[0],t[1]),r=Object(c.useState)({title:"",body:""}),s=Object(j.a)(r,2),o=s[0],l=s[1],p=function(e){l(Object(b.a)(Object(b.a)({},o),{},Object(u.a)({},e.target.name,e.target.value)))},m=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=JSON.stringify(o),c={headers:{"Content-Type":"application/json"}},a({type:"LOADING"}),e.next=7,O.a.post("/api/v1/post/create",n,c);case 7:r=e.sent,s=r.data,a({type:"STOP_LOADING"}),s.error?(a({type:"ERROR",payload:s.errorMessage}),setTimeout((function(){a({type:"REMOVE_ERROR"})}),2e3)):a({type:"SET_POST",payload:s.payload.posts}),console.log(s),l({title:"",body:""}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),l({title:"",body:""}),a({type:"ERROR",payload:e.t0.message}),setTimeout((function(){a({type:"REMOVE_ERROR"})}),2e3);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{className:"my-2",onSubmit:function(e){return m(e)},children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"title",className:"form-control",placeholder:"Title",value:o.title,onChange:function(e){return p(e)},required:!0})}),Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{name:"body",type:"text",className:"form-control",placeholder:"Body",value:o.body,onChange:function(e){return p(e)},required:!0})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add post"})]})})},L=function(e){var t=e._id,a=e.title,r=e.body,s=e.likes,o=e.datetime,l=e.owner,u=e.username,b=Object(c.useContext)(f),p=Object(j.a)(b,2),m=p[0],h=p[1],x=-1===s.indexOf(m.id),y=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h({type:"LOADING"}),e.next=4,O.a.post("/api/v1/post/like/".concat(t));case 4:a=e.sent,h({type:"STOP_LOADING"}),n=a.data.payload.posts,h({type:"SET_POST",payload:n}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h({type:"ERROR",payload:e.t0.message}),setTimeout((function(){h({type:"REMOVE_ERROR"})}),2e3);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h({type:"LOADING"}),e.next=4,O.a.post("/api/v1/post/unlike/".concat(t));case 4:a=e.sent,h({type:"STOP_LOADING"}),console.log("res.data",a.data),n=a.data.payload.posts,h({type:"SET_POST",payload:n}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),h({type:"ERROR",payload:e.t0.message}),setTimeout((function(){h({type:"REMOVE_ERROR"})}),2e3);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"card my-2",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h3",{className:"card-title",children:a}),Object(n.jsx)("h5",{className:"card-text",children:r}),Object(n.jsxs)("h6",{children:["By ",Object(n.jsx)(E.b,{to:"/profile/".concat(l),children:u})]}),Object(n.jsxs)("p",{children:["Posted on"," ",w()(o).format("MMMM Do YYYY, h:mm:ss a")]}),Object(n.jsxs)("span",{children:[s.length," likes"]}),x?Object(n.jsx)("button",{className:"btn btn-success mx-2",onClick:function(){return y(t)},children:"Like"}):Object(n.jsx)("button",{className:"btn btn-danger mx-2",onClick:function(){return v(t)},children:"Unlike"}),Object(n.jsx)(E.b,{to:"/post/".concat(t),className:"mx-2",children:Object(n.jsx)("button",{className:"btn btn-info my-2",children:"Full post"})})]})})},C=r.a.memo(L),D=a(37),M=a(38),A=a(40),G=a(39),F=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("h4",{children:"Something went wrong. Please reload the page "})})},U=function(e){Object(A.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(M.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e.message)}},{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:this.state.hasError?Object(n.jsx)(F,{}):this.props.children})}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(c.Component),Y=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,1)[0];return Object(n.jsx)("div",{children:t.posts&&t.posts.length>0&&t.posts.map((function(e){return Object(n.jsx)(U,{children:Object(n.jsx)(C,Object(b.a)({},e))},e._id)}))})},V=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(v.g)(),o=Object(c.useState)(1),l=Object(j.a)(o,2),u=l[0],b=l[1];return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(i.a.mark((function e(){var t,a,n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,O.a.get("/api/v1/dashboard/".concat(u));case 4:t=e.sent,r({type:"STOP_LOADING"}),console.log(t.data),403===t.status||t.data.error?(r({type:"AUTH_ERROR"}),s.push("/login")):(a=t.data.payload,n=a.id,c=a.posts,o=a.totalPosts,r({type:"SET_USER",payload:{id:n}}),r({type:"ADD_POST",payload:c}),r({type:"LENGTH",payload:o})),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),r({type:"STOP_LOADING"}),console.log(e.t0),setTimeout((function(){r({type:"REMOVE_ERROR"})}),2e3),r({type:"AUTH_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[r,s,u]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"bg-light px-5 py-1 rounded-lg m-3",children:[Object(n.jsx)("div",{children:"Dashboard"}),Object(n.jsx)(I,{})]}),Object(n.jsxs)("div",{className:"bg-light p-5 rounded-lg m-3",children:[Object(n.jsx)(Y,{}),Object(n.jsx)("nav",{"aria-label":"Page navigation example",children:Object(n.jsxs)("ul",{className:"pagination",children:[u&&u>1&&Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",onClick:function(){return b(u-1)},children:"Previous"})}),parseInt(a.totalPosts)>3*parseInt(u)&&Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",onClick:function(){return b(u+1)},children:"Next"})})]})})]})]})},q=function(e){var t=e.component,a=Object(P.a)(e,["component"]),r=Object(c.useContext)(f),s=Object(j.a)(r,1)[0];return Object(n.jsx)(v.b,Object(b.a)(Object(b.a)({},a),{},{render:function(){return s.isAuth?Object(n.jsx)(v.a,{to:"/dashboard/1"}):Object(n.jsx)(t,{})}}))},B=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,1)[0];return t.error&&Object(n.jsx)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:t.errorMessage})},H=a.p+"static/media/spinner.9b5fad62.gif",J=function(){var e=Object(c.useContext)(f);return Object(j.a)(e,1)[0].loading?Object(n.jsx)(c.Fragment,{children:Object(n.jsx)("div",{className:"spinner",children:Object(n.jsx)("img",{src:H,alt:"Loading...",style:{width:"50px",margin:"auto",display:"block",position:"absolute",top:"40vh",left:"50vw"}})})}):null},z=function(){return Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(n.jsxs)("div",{className:"container-fluid d-flex justify-content-around",children:[Object(n.jsx)(E.b,{className:"navbar-brand",to:"/",children:"Surface"}),Object(n.jsx)(E.b,{className:"nav-link",to:"/login",children:"Login"}),Object(n.jsx)(E.b,{className:"nav-link",to:"/signup",children:"Signup"})]})})},K=Object(v.i)((function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(v.g)(),o=function(){var e=Object(d.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/v1/auth/signout");case 3:r({type:"LOGOUT"}),s.push("/login"),e.next=13;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("error in signout"),r({type:"LOGOUT"}),s.push("/login"),window.location.reload();case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(n.jsxs)("div",{className:"container-fluid d-flex justify-content-around",children:[Object(n.jsx)(E.b,{className:"navbar-brand",to:"/dashboard/1",children:"Surface"}),Object(n.jsx)("button",{className:"btn btn-dark nav-link",children:Object(n.jsx)(E.b,{style:{textDecoration:"none",color:"white"},to:"/profile/".concat(a.id),children:"My Profile"})}),Object(n.jsx)("button",{className:"btn btn-dark nav-link",onClick:o,children:"Signout"})]})})})),Q=function(){var e=Object(c.useContext)(f);return Object(j.a)(e,1)[0].isAuth?Object(n.jsx)(K,{}):Object(n.jsx)(z,{})},W=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(v.h)().id;Object(c.useEffect)((function(){(function(){var e=Object(d.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,O.a.get("/api/v1/profile/".concat(s));case 4:t=e.sent,a=t.data,r({type:"STOP_LOADING"}),console.log(a),r({type:"SET_PROFILE",payload:Object(b.a)({},a.payload)}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:"ERROR",payload:e.t0.message}),setTimeout((function(){r({type:"REMOVE_ERROR"})}),2e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[r,s]);var o=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,O.a.post("/api/v1/follow/".concat(a.profile.username));case 4:if(t=e.sent,r({type:"STOP_LOADING"}),!t.data.error){e.next=10;break}throw new Error(t.data.errorMessage);case 10:r({type:"SET_PROFILE",payload:{followers:t.data.followers,isFollowing:!0}});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),r({type:"ERROR",payload:e.t0.message}),setTimeout((function(){r({type:"REMOVE_ERROR"})}),2e3);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,O.a.post("/api/v1/unfollow/".concat(a.profile.username));case 4:if(t=e.sent,r({type:"STOP_LOADING"}),!t.data.error){e.next=10;break}throw new Error(t.data.errorMessage);case 10:r({type:"SET_PROFILE",payload:{followers:t.data.followers,isFollowing:!1}});case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),r({type:"ERROR",payload:e.t0.message}),setTimeout((function(){r({type:"REMOVE_ERROR"})}),2e3);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"bg-light p-5 rounded-lg m-3",children:[Object(n.jsx)(E.b,{to:"/dashboard/1",className:"btn btn-primary my-3",children:"Back to dashboard"}),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"card my-2",children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h3",{className:"text-center",children:a.profile.name}),Object(n.jsx)("h3",{className:"text-center",children:a.profile.username}),Object(n.jsxs)("h5",{className:"text-center",children:["Followers: ",a.profile.followers]}),Object(n.jsxs)("h5",{className:"text-center",children:["Following: ",a.profile.following]}),a.username===a.profile.username?null:a.profile.isFollowing?Object(n.jsx)("button",{className:"btn btn-success",onClick:l,children:"Unfollow"}):Object(n.jsx)("button",{className:"btn btn-dark",onClick:o,children:"Follow"})]})})})]})},X=function(e){var t=e.owner,a=e.fromUsername,c=e.body;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)(E.b,{to:"/profile/".concat(t),children:Object(n.jsx)("h3",{className:"card-title",children:a})}),Object(n.jsx)("h5",{className:"card-text",children:c})]})})},Z=r.a.memo(X),$=function(){var e=Object(c.useContext)(f),t=Object(j.a)(e,2),a=t[0],r=t[1],s=Object(v.h)().postId,o=Object(v.g)(),l=Object(c.useState)({body:""}),u=Object(j.a)(l,2),p=u[0],h=u[1],x=function(){var e=Object(d.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),n=JSON.stringify(p),e.next=5,O.a.post("/api/v1/post/comment/".concat(a.fullPost._id),n,{headers:{"Content-Type":"application/json"}});case 5:if(!(c=e.sent).data.error){e.next=10;break}throw new Error(c.data.errorMessage);case 10:console.log(c.data),r({type:"FULL_POST",payload:Object(b.a)({},c.data.payload.post)}),r({type:"COMMENTS",payload:Object(m.a)(c.data.payload.comments)});case 13:h({body:""}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(d.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:"LOADING"}),e.next=4,O()("/api/v1/post/".concat(s));case 4:if(t=e.sent,r({type:"STOP_LOADING"}),!t.data.error){e.next=10;break}throw new Error(t.data.errorMessage);case 10:console.log(t.data),r({type:"FULL_POST",payload:Object(b.a)({},t.data.payload.post)}),r({type:"COMMENTS",payload:Object(m.a)(t.data.payload.comments)});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}})()()}),[r,s,o]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"bg-light p-5 rounded-lg m-3",children:[Object(n.jsx)(E.b,{to:"/dashboard/1",children:Object(n.jsx)("button",{className:"btn btn-primary my-2",children:"Back to dashboard"})}),Object(n.jsx)("div",{className:"card my-2",id:a.fullPost._id,children:Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h4",{className:"card-title",children:a.fullPost.title}),Object(n.jsx)("h5",{className:"card-text",children:a.fullPost.body}),Object(n.jsxs)("h6",{children:["By"," ",Object(n.jsx)(E.b,{to:"/profile/".concat(a.fullPost.owner),children:a.fullPost.username})]}),Object(n.jsxs)("p",{children:["Posted on"," ",w()(a.fullPost.datetime).format("MMMM Do YYYY, h:mm:ss a")]}),Object(n.jsxs)("form",{className:"my-2",onSubmit:function(e){return x(e)},children:[Object(n.jsx)("div",{className:"mb-3",children:Object(n.jsx)("input",{type:"text",name:"body",className:"form-control",placeholder:"Add comment",value:p.body,onChange:function(e){return function(e){h({body:e.target.value})}(e)},required:!0})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add comment"})]}),a.comments.map((function(e){return Object(n.jsx)(Z,Object(b.a)({},e),e._id)}))]})})]})})},ee=function(){return Object(n.jsx)("div",{className:"jumbotron",children:Object(n.jsxs)("h2",{children:["The page you are looking for does not exist. Click"," ",Object(n.jsx)(E.b,{to:"/",children:"here"})]})})};var te=function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)(E.a,{children:Object(n.jsxs)(y,{children:[Object(n.jsx)(B,{}),Object(n.jsx)(J,{}),Object(n.jsx)(Q,{}),Object(n.jsxs)(v.d,{children:[Object(n.jsx)(q,{path:"/login",component:g,exact:!0}),Object(n.jsx)(q,{path:"/signup",component:N,exact:!0}),Object(n.jsx)(q,{path:"/",component:T,exact:!0}),Object(n.jsx)(q,{path:"/:page",component:T,exact:!0}),Object(n.jsx)(_,{path:"/dashboard/:page",component:V,exact:!0}),Object(n.jsx)(_,{path:"/profile/:id",component:W,exact:!0}),Object(n.jsx)(_,{path:"/post/:postId",component:$,exact:!0}),Object(n.jsx)(v.b,{path:"/*",component:ee})]})]})})})},ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(te,{})}),document.getElementById("root")),ae()}},[[73,1,2]]]);
//# sourceMappingURL=main.de99139a.chunk.js.map